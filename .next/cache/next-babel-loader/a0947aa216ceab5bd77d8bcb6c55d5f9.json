{"ast":null,"code":"var _jsxFileName = \"/home/tylerklepsch/sites/tylerklepsch--wip/tylerklepsch-old/components/ContactForm/ContactForm.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport Input from '../UI/Input/Input';\nimport SubmitButton from '../UI/SubmitButton/SubmitButton';\nimport classes from './ContactForm.module.css';\n/*\n  TO DO: After pushing to netlify, connect and confirm netlify will send submitted message.\n*/\n\nconst encode = data => {\n  return Object.keys(data).map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key])).join(\"&\");\n};\n\nclass ContactForm extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      contactInfo: {\n        name: {\n          elementType: 'input',\n          elementConfig: {\n            type: 'text',\n            label: 'Name',\n            placeholder: 'Jonathon Joestar'\n          },\n          value: '',\n          validation: {\n            required: false\n          },\n          valid: true,\n          touched: false\n        },\n        subject: {\n          elementType: 'input',\n          elementConfig: {\n            type: 'text',\n            label: 'Subject',\n            placeholder: 'Who is your favourite Joestar?'\n          },\n          value: '',\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        },\n        comment: {\n          elementType: 'textarea',\n          elementConfig: {\n            type: 'textarea',\n            label: 'Comment',\n            placeholder: 'There is no wrong answer, but...'\n          },\n          value: '',\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false\n        }\n      },\n      formIsValid: false\n    });\n\n    _defineProperty(this, \"submitHandler\", e => {\n      fetch(\"/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: encode(_objectSpread({\n          \"form-name\": \"contact-t\"\n        }, this.state))\n      }).then(() => alert(\"Success!\")).catch(error => alert(error));\n      e.preventDefault();\n    });\n\n    _defineProperty(this, \"inputChangedHandler\", (event, inputIdentifier) => {\n      // Copy of current form data top level.\n      const formData = _objectSpread({}, this.state.contactInfo); // We can copy the object properties here: \n\n\n      const updatedFormElement = _objectSpread({}, formData[inputIdentifier]); // Now we can set the state value to the event.target.value (aka, user typing in the element).\n\n\n      updatedFormElement.value = event.target.value; // Will update to true or false.\n\n      updatedFormElement.valid = this.checkValidity(updatedFormElement.value, updatedFormElement.validation);\n      updatedFormElement.touched = true; // Set the form element (key) to update the matched state.\n\n      formData[inputIdentifier] = updatedFormElement; // Validate the whole form.\n      // Initially set to true, so we don't have the problem of last item having to be true to pass.\n\n      let formIsValid = true;\n\n      for (let inputIdentifier in formData) {\n        // This will set formIsValid to true of any items match and if formIsValid is true. False overrides true.\n        formIsValid = formData[inputIdentifier].valid && formIsValid;\n      }\n\n      this.setState({\n        contactInfo: formData,\n        formIsValid: formIsValid\n      });\n    });\n  }\n\n  checkValidity(value, rules) {\n    let isValid = true; // If no rules are defined, automatically return true.\n\n    if (!rules) {\n      return true;\n    } // add all rules below.\n    // Check if element is required.\n\n\n    if (rules.required) {\n      // isValid is only true if the trimmed value is not empty.\n      isValid = value.trim() !== '' && isValid;\n    }\n\n    return isValid;\n  }\n\n  render() {\n    const formElementsArray = [];\n\n    for (let key in this.state.contactInfo) {\n      formElementsArray.push({\n        id: key,\n        config: this.state.contactInfo[key]\n      });\n    }\n    /* Create a new array of input elements by mapping our contactForm state array. */\n\n\n    let form = __jsx(\"form\", {\n      name: \"contact-t\",\n      method: \"post\",\n      className: classes.Form,\n      netlify: true,\n      \"netlify-honeypot\": \"bot-field\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }\n    }, __jsx(\"input\", {\n      type: \"hidden\",\n      name: \"form-name\",\n      value: \"contact-t\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }), formElementsArray.map(formElement => __jsx(Input, {\n      key: formElement.id,\n      elementType: formElement.config.elementType,\n      elementConfig: formElement.config.elementConfig,\n      value: formElement.config.value,\n      invalid: !formElement.config.valid,\n      shouldValidate: formElement.config.validation,\n      touched: formElement.config.touched,\n      changed: event => this.inputChangedHandler(event, formElement.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: classes.form__submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, __jsx(SubmitButton, {\n      btnType: \"form-submit\",\n      clicked: this.submitHandler,\n      disabled: !this.state.formIsValid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, \"Submit\")));\n\n    return __jsx(\"div\", {\n      className: classes.FormContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }, form);\n  }\n\n}\n\nexport default ContactForm;","map":{"version":3,"sources":["/home/tylerklepsch/sites/tylerklepsch--wip/tylerklepsch-old/components/ContactForm/ContactForm.js"],"names":["React","Component","Input","SubmitButton","classes","encode","data","Object","keys","map","key","encodeURIComponent","join","ContactForm","contactInfo","name","elementType","elementConfig","type","label","placeholder","value","validation","required","valid","touched","subject","comment","formIsValid","e","fetch","method","headers","body","state","then","alert","catch","error","preventDefault","event","inputIdentifier","formData","updatedFormElement","target","checkValidity","setState","rules","isValid","trim","render","formElementsArray","push","id","config","form","Form","handleSubmit","formElement","inputChangedHandler","form__submit","submitHandler","FormContainer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Input from '../UI/Input/Input';\nimport SubmitButton from '../UI/SubmitButton/SubmitButton';\nimport classes from './ContactForm.module.css';\n\n\n/*\n  TO DO: After pushing to netlify, connect and confirm netlify will send submitted message.\n*/\nconst encode = (data) => {\n  return Object.keys(data)\n      .map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(data[key]))\n      .join(\"&\");\n}\n\nclass ContactForm extends Component {\n  state = {\n    contactInfo: {\n      name: {\n        elementType: 'input',\n        elementConfig: {\n          type: 'text',\n          label: 'Name',\n          placeholder: 'Jonathon Joestar',\n        },\n        value: '',\n        validation: {\n          required: false\n        },\n        valid: true,\n        touched: false\n      },\n      subject: {\n        elementType: 'input',\n        elementConfig: {\n          type: 'text',\n          label: 'Subject',\n          placeholder: 'Who is your favourite Joestar?',\n        },\n        value: '',\n        validation: {\n          required: true\n        },\n        valid: false,\n        touched: false\n      },\n      comment: {\n        elementType: 'textarea',\n        elementConfig: {\n          type: 'textarea',\n          label: 'Comment',\n          placeholder: 'There is no wrong answer, but...',\n        },\n        value: '',\n        validation: {\n          required: true\n        },\n        valid: false,\n        touched: false\n      },\n    },\n    formIsValid: false\n  }\n\n  checkValidity (value, rules) {\n    let isValid = true;\n\n    // If no rules are defined, automatically return true.\n    if (!rules) {\n      return true;\n    }\n\n    // add all rules below.\n\n    // Check if element is required.\n    if (rules.required) {\n      // isValid is only true if the trimmed value is not empty.\n      isValid = value.trim() !== '' && isValid;\n    }\n\n    return isValid;\n  }\n\n  submitHandler = (e) => {\n    fetch(\"/\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n      body: encode({ \"form-name\": \"contact-t\", ...this.state })\n    })\n      .then(() => alert(\"Success!\"))\n      .catch(error => alert(error));\n\n    e.preventDefault();\n  }\n\n  inputChangedHandler = (event, inputIdentifier) => {\n    // Copy of current form data top level.\n    const formData = {\n      ...this.state.contactInfo\n    }\n\n    // We can copy the object properties here: \n    const updatedFormElement = {\n      ...formData[inputIdentifier]\n    }\n\n    // Now we can set the state value to the event.target.value (aka, user typing in the element).\n    updatedFormElement.value = event.target.value;\n\n    // Will update to true or false.\n    updatedFormElement.valid = this.checkValidity( updatedFormElement.value, updatedFormElement.validation);\n    updatedFormElement.touched = true;\n\n    // Set the form element (key) to update the matched state.\n    formData[inputIdentifier] = updatedFormElement;\n\n    // Validate the whole form.\n    // Initially set to true, so we don't have the problem of last item having to be true to pass.\n    let formIsValid = true;\n\n    for (let inputIdentifier in formData) {\n      // This will set formIsValid to true of any items match and if formIsValid is true. False overrides true.\n      formIsValid = formData[inputIdentifier].valid && formIsValid;\n    }\n\n    this.setState({contactInfo: formData, formIsValid: formIsValid});\n  }\n\n\n  render () {\n    const formElementsArray = [];\n\n    for (let key in this.state.contactInfo) {\n      formElementsArray.push({\n        id: key,\n        config: this.state.contactInfo[key],\n      });\n    }\n\n    /* Create a new array of input elements by mapping our contactForm state array. */\n    let form = (\n      <form \n        name=\"contact-t\"\n        method=\"post\" \n        className={classes.Form}\n        netlify \n        netlify-honeypot=\"bot-field\"\n        onSubmit={this.handleSubmit}>\n        <input type=\"hidden\" name=\"form-name\" value=\"contact-t\" />\n        {formElementsArray.map(formElement => (\n          <Input \n            key={formElement.id}\n            elementType={formElement.config.elementType}\n            elementConfig={formElement.config.elementConfig}\n            value={formElement.config.value}\n            invalid={!formElement.config.valid}\n            shouldValidate={formElement.config.validation}\n            touched={formElement.config.touched}\n            changed={(event) => this.inputChangedHandler(event, formElement.id)}/>\n        ))}\n        <div className={classes.form__submit}>\n          <SubmitButton \n            btnType=\"form-submit\" \n            clicked={this.submitHandler}\n            disabled={!this.state.formIsValid}>Submit</SubmitButton>          \n        </div>\n\n      </form>\n    );\n\n    return (\n      <div className={classes.FormContainer}>\n        {form}\n      </div>\n    )\n  }\n}\n\nexport default ContactForm;"]},"metadata":{},"sourceType":"module"}